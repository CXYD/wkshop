package net.jeeshop.web.controller.manage.system;import net.jeeshop.biz.base.bean.PageBean;import net.jeeshop.biz.base.bean.PageQueryBean;import net.jeeshop.biz.system.model.SystemLog;import net.jeeshop.biz.system.model.SystemLogExample;import net.jeeshop.biz.system.service.SystemLogService;import net.jeeshop.web.controller.manage.ManageBaseController;import org.apache.commons.lang.StringUtils;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.beans.propertyeditors.CustomDateEditor;import org.springframework.stereotype.Controller;import org.springframework.web.bind.WebDataBinder;import org.springframework.web.bind.annotation.InitBinder;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.ResponseBody;import java.text.ParseException;import java.text.SimpleDateFormat;import java.util.Date;/** * 系统日志管理 * * @author dylan */@Controller@RequestMapping("/manage/systemlog/")public class SystemLogController extends ManageBaseController<SystemLog, SystemLogExample> {    private static final long serialVersionUID = 1L;    @Autowired    private SystemLogService systemLogService;    public SystemLogController() {        super.page_toList = "manage/system/systemlogList";        super.page_toEdit = null;        super.page_toAdd = null;    }    @Override    public SystemLogService getService() {        return systemLogService;    }    @RequestMapping("loadData")    @ResponseBody    public PageBean<SystemLog> loadData(SystemLog queryParams, PageQueryBean pageQueryBean) {        SystemLogExample example = new SystemLogExample();        SystemLogExample.Criteria criteria = example.createCriteria();        if (StringUtils.isNotBlank(queryParams.getAccount())) {            criteria.andAccountEqualTo(queryParams.getAccount());        }        Date startTime = queryParams.getLogTime();        Date endTime = queryParams.getEndTime();        if(startTime!=null && endTime!=null){            try {                SimpleDateFormat simpleDateFormat = new SimpleDateFormat("yyyy-MM-dd");                String startd = simpleDateFormat.format(startTime);                String endd = simpleDateFormat.format(endTime);                criteria.andLogTimeBetween(simpleDateFormat.parse(startd), simpleDateFormat.parse(endd));            } catch (ParseException e) {                e.printStackTrace();            }        }        example.setOrderByClause(getOrderColumnName(request));        PageBean<SystemLog> pager = systemLogService.selectPageList(example, pageQueryBean);        return pager;    }    /**     *日期转换     * @param binder     */    @InitBinder    public void initBinder(WebDataBinder binder) {        SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");        dateFormat.setLenient(false);        binder.registerCustomEditor(Date.class, new CustomDateEditor(dateFormat, true));   //true:允许输入空值，false:不能为空值    }}